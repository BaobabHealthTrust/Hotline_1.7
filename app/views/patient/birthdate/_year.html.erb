<style>

.btn-year {
    display: inline;
    margin: 5px 2px 2px;
    text-align: center;
    background-color: #5281E0;
    border: solid dodgerblue 3px;
    border-radius: 7px;
    box-shadow: 2px 2px 10px lightblue inset;
    color: white;
    font-size: 1.7em;
    line-height: 57px;
    min-width: 120px;
    font-weight: bold;
    min-height: 100px;
}

.btn-red {
    display: inline;
    margin: 5px 2px 2px;
    text-align: center;
    background-color: darkred;
    border: solid #477EEB 1px;
    border-radius: 7px;
    box-shadow: 5px 5px 15px lightblue inset;
    color: white;
    font-size: 1.7em;
    line-height: 57px;
    min-width: 120px;
    font-weight: bold;
    min-height: 100px;
}

.btn-green {
    display: inline;
    margin: 5px 2px 2px;
    text-align: center;
    background-color: darkgreen;
    border: solid #477EEB 1px;
    border-radius: 7px;
    box-shadow: 5px 5px 15px lightblue inset;
    color: white;
    font-size: 1.7em;
    line-height: 57px;
    min-width: 120px;
    font-weight: bold;
    min-height: 100px;
}

.lower_buttons {
    font-size: 1.4em;
}
 
#tbInputYear, #tbInputAge {
  margin-top: 10px;
  background: rgba(0, 0, 0, 0) none repeat scroll 0 0;
  border-color: -moz-use-text-color -moz-use-text-color silver;
  border-style: none none solid;
  border-width: medium medium 1px;
  font-family: "Nimbus Sans L","Arial Narrow",sans-serif;
  font-size: 2.2em;
  padding-left: 5px;
  width: 99%;
  text-align: center;
}

        /* --------------------- popUp For Alert -----------------------*/
.my_button {
    -moz-user-select: none;
    background-image: none;
    border: 1px solid transparent;
    border-radius: 4px;
    cursor: pointer;
    display: inline-block;
    font-size: 16px;
    font-weight: bolder;
    line-height: 1.82857;
    margin-bottom: 0;
    padding: 6px 56px;
    text-align: center;
    vertical-align: middle;
    white-space: nowrap;
    background-color: #337ab7;
    border-color: #2e6da4;
    color: #fff;
    float: right;
    margin-top: -5px;
}

.exit_button {
    -moz-user-select: none;
    background-image: none;
    border: 1px solid transparent;
    border-radius: 4px;
    cursor: pointer;
    display: inline-block;
    font-size: 16px;
    font-weight: bolder;
    line-height: 1.82857;
    margin-bottom: 0;
    padding: 0px 20px;
    text-align: center;
    vertical-align: middle;
    white-space: nowrap;
    background-color: #337ab7;
    border-color: #2e6da4;
    color: #fff;
    float: right;
    margin-top: -5px;
    top: 0%;
}


#popup-div {
    display: none;
    background-color: #F4F4F4;
    border: 2px solid #E0E0E0;
    border-radius: 15px;
    height: auto;
    padding: 5px;
    top: 0%;
    left: 0%;
    position: absolute;
    margin-top: 100px;
    width: 560px;
    margin-left: 430px;
    z-index: 991;
}

#popup-header{
    border-bottom: 2px solid #7D9EC0;
    margin-left: -5px;
    width: 101.5%;
    background-color: #FFFFFF;
    margin-top: -5px;
    padding-top: 5px;
    border-radius: 15px 15px 0 0;
    font-size: 14pt;
    font-weight: bolder;
}

#cover{
    display: none;
    position: absolute;
    background-color: black;
    width: 100%;
    height: 102%;
    left: 0%;
    top: 0%;
    z-index: 990;
    opacity: 0.65;
}

#no {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}
/* ------------------------------------------------------------------- */

#flash {
    background-color: #ff2244;
    border-radius: 12px;
    border: 1px solid;
    height: 80px;
    text-align: center;
}
</style>

<body onload="load();">


<label>Enter Birth Year</label>
<input id="tbInputYear" type="text" maxlength = "4" />

<div id="year" class="virtual-keypad">
    <input id="btn1" type="button" onclick="input(this);" value="1"  class="btn-year" />
    <input id="btn2" type="button" onclick="input(this);" value="2"  class="btn-year" />
    <input id="btn3" type="button" onclick="input(this);" value="3"  class="btn-year" />
    <br />
    <input id="btn4" type="button" onclick="input(this);" value="4"  class="btn-year" />
    <input id="btn5" type="button" onclick="input(this);" value="5"  class="btn-year" />
    <input id="btn6" type="button" onclick="input(this);" value="6"  class="btn-year" />
    <br />
    <input id="btn7" type="button" onclick="input(this);" value="7"  class="btn-year" />
    <input id="btn8" type="button" onclick="input(this);" value="8"  class="btn-year" />
    <input id="btn9" type="button" onclick="input(this);" value="9"  class="btn-year" />
    <br />
    <input id="btnUnknow" type="button" value="Unknown" onclick="input(this); popUp();" class="btn-year lower_buttons" />
    <input id="btn0" type="button" onclick="input(this)" value="0"  class="btn-year lower_buttons" />
    <input id="btnCl" type="button" value="Clear" onclick="clearInput();" class="btn-year lower_buttons" />
</div>

<!-- ================================================== PopUp ================================================= -->
<div id="popup-div">
  <div id="popup-header">
    <center>
        <div id="flash" style="display: none;"></div>
        Birth Year unknown.
        <br>
        Estimate Age
    </center>
    <span id="no" onclick="clearInput(); hidePopup();" class="exit_button" >
        <strong>
            X
        </strong>
    </span>
  </div>
  <br />
  <div id="popup-content">
    <span style="font-size: 16pt;">
      <center>
        <input id="tbInputAge" type="text" maxlength = "2" />

        <div id="year" class="virtual-keypad">
            <input id="btn1" type="button" onclick="inputAge(this);" value="1"  class="btn-year" />
            <input id="btn2" type="button" onclick="inputAge(this);" value="2"  class="btn-year" />
            <input id="btn3" type="button" onclick="inputAge(this);" value="3"  class="btn-year" />
            <br />
            <input id="btn4" type="button" onclick="inputAge(this);" value="4"  class="btn-year" />
            <input id="btn5" type="button" onclick="inputAge(this);" value="5"  class="btn-year" />
            <input id="btn6" type="button" onclick="inputAge(this);" value="6"  class="btn-year" />
            <br />
            <input id="btn7" type="button" onclick="inputAge(this);" value="7"  class="btn-year" />
            <input id="btn8" type="button" onclick="inputAge(this);" value="8"  class="btn-year" />
            <input id="btn9" type="button" onclick="inputAge(this);" value="9"  class="btn-year" />
            <br />
            <input id="btnCancel" type="button" value="Clear" onclick="clearInputAge();" class="btn-red lower_buttons" />
            <input id="btn0" type="button" onclick="inputAge(this)" value="0"  class="btn-year lower_buttons" />
            <input id="btnCl" type="button" value="Create" onclick="saveByAge();" class="btn-green lower_buttons" />
        </div>
        <br />
      </center>
    </span>
  </div>
</div>
<div id="cover"></div>

<!-- ============================================================================================================= -->


</body>

<script>

function popUp() {
      document.getElementById("popup-div").style.display = 'inline';
      document.getElementById("cover").style.display = 'inline';
}

function hidePopup(){
    //clearInput();
    document.getElementById("popup-div").style.display = 'none';
    document.getElementById("cover").style.display = 'none';
}

function input(e) {
    var tbInput = document.getElementById('tbInputYear');
    if(tbInput.value == 'Unknown' && e.value != 'Unknown') 
      return;

    if(e.value == 'Unknown') {
      tbInput.value = e.value;
    }else{
      tbInput.value = tbInput.value + e.value;
    }   
}

function clearInput() {
  document.getElementById("tbInputYear").value = '';
  /*var tbInput = document.getElementById("tbInputYear");
  tbInput.value = tbInput.value.substr(0, tbInput.value.length - 1);*/
}

function clearInputAge() {
    document.getElementById("flash").style.display = 'none';
    document.getElementById("tbInputAge").value = '';
  /*var tbInput = document.getElementById("tbInputYear");
  tbInput.value = tbInput.value.substr(0, tbInput.value.length - 1);*/
}

function inputAge(e) {
    var tbInput = document.getElementById('tbInputAge');
    if(tbInput.value == 'Unknown' && e.value != 'Unknown') 
      return;

    if(e.value == 'Unknown') {
      tbInput.value = e.value;
    }else{
      tbInput.value = tbInput.value + e.value;
    }   
}

function load() {
    var array = new Array();
    try { 
        while (array.length < 10) {
            var temp = Math.round(Math.random() * 9);
            if (!contain(array, temp)) {
                array.push(temp);
            }
        }
        for (i = 0; i < 10; i++) {
            var btn = document.getElementById("btn" + i);
            btn.value = array[i];
        }
    }
    catch(e) {

    }
}

function saveByAge() {
        birth_month = document.getElementById('tbInputMonth').value;
        document.getElementById('selected_month').value = birth_month;
        estimated_age = document.getElementById('tbInputAge').value;
        document.getElementById('age_estimate').value = estimated_age;
        age_max_digits = estimated_age.length > 3
        age_out_of_range = estimated_age > 150
        age_blank = estimated_age.length == 0
        incorrect_age = age_max_digits || age_out_of_range || age_blank;
        if (incorrect_age) {
             //alert('incorrect input');
            var flash = document.getElementById('flash');
            if ( incorrect_age == age_max_digits ) {
                flash.innerHTML = '<%= flash[:age_max_digits] %><br>';
            }
            else if ( incorrect_age == age_out_of_range ) {
                flash.innerHTML = '<%= flash[:age_out_of_range] %><br>';
            }
            else if ( incorrect_age == age_blank ) {
                flash.innerHTML = '<%= flash[:age_blank] %><br>';
            }
            flash.style.display = 'inline';
            setTimeout( function() { 
                flash.style.display = "none" 
            }, 4000);
            //notify('incorrect_input');
            return;
        }
        else {
            document.getElementById('new-person').submit();
        }
}

</script>


