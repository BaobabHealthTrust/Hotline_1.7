


<style>
.main-container {
  width:100%
}

body {
  -webkit-user-select: none;  /* Chrome all / Safari all */
  -moz-user-select: none;     /* Firefox all */
  -ms-user-select: none;      /* IE 10+ */
  user-select: none;          /* Likely future */
}

img {
  user-drag: none;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-drag: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  pointer-events: none;
}

/* .................................. header starts ........................................................ */
.table-container {
  width: 99%;
  display: table;
  padding: 0px 1px 0px 1px;
  border-style: solid;
  border-width: 0px 0px 1px 0px;
}

.table-row  {
  display: table-row;
  width: 100%;
}

.table-cell {
  display: table-cell;
}

.village-reach-icon {
  width: 80px;
  height: 80px;
  border-style: solid;
  border-width: 1px;
}

.confirm .village-reach-icon {
  border-width: 0px;
}
/*
.confirm .table-cell {
  position: absolute;
  bottom: 7%;
}*/
/* .................................. header ends........................................................ */


.btn-title {
  bottom: 30px;
  position: relative;
  padding-right: 15px;

}

</style>


<div class="table-container" style="height: 12%;">
  <div class="table-row">
    <div class="table-cell" style="width: 90%;">
      <h3>Creating new record</h3>
      <p><%=@given_name%>&nbsp;<%=@family_name%>&nbsp;(<%=@gender%>)</p>
    </div>
    <div class="table-cell" style="width: 10%; vertical-align: middle; text-align: right;">
      <span class="icons">
        <%=image_tag("vr.jpeg", class: 'icons village-reach-icon')%>
      </span>
    </div>
  </div>
</div>

<!-- ..................................... Data capture starts .............................. -->


<div class="table-container" style="height: 65%; border-width: 0px 0px 1px 0px;">
  <div class="table-row">
    <div class="table-cell" style="width: 29%; vertical-align: top; text-align: center;">
      <%=render :partial => 'patient/birthdate/year'%>
    </div>
    
    <div class="table-cell" style="width: 39%; vertical-align: top; text-align: center; border-style: solid; border-width: 0px 1px 0px 1px;">
      <%=render :partial => 'patient/birthdate/month'%>
    </div>
    
    <div class="table-cell" style="width: 29%; vertical-align: top; text-align: center;">
      <%=render :partial => 'patient/birthdate/day'%>
    </div>
  </div>
</div>

<!-- ..................................... Data capture ends .............................. -->



<!-- div class="table-container confirm" style="height: 12%; border-style: solid; border-width: 0px;">
  <div class="table-row">
    <div class="table-cell" style="width: 48%; vertical-align: middle; text-align: right; float: right;padding-top:10px;" onclick="createPerson();">
      <span>
        <span class="btn-title">Save</span>
        <%=image_tag("icons/add-person.png", class: 'icons village-reach-icon')%>
      </span>
    </div>
    <div class="table-cell" style="width: 48%; vertical-align: middle; text-align: left; float: left;padding-top:10px;" onclick="document.location='/start_call'">
      <span>
        <%=image_tag("icons/cancel-person-creation.png", class: 'icons village-reach-icon')%>
        <span class="btn-title">Cancel</span>
      </span>
    </div>
  </div>
</div -->

<%= render :partial => 'patient/birthdate/button_footer' %>


<%= form_tag("/patient/create", id: "new-person", method: 'post', enctype: 'multipart/form-data') do %>
  <input type = "hidden" name = "person[names][given_name]" value = "<%= @given_name %>" />
  <input type = "hidden" name = "person[names][family_name]" value = "<%= @family_name %>" />
  <input type = "hidden" name = "person[gender]" value = "<%= @gender %>" />

  <input type = "hidden" name = "person[birthdate][year]" id = "selected_year" />
  <input type = "hidden" name = "person[birthdate][month]" id = "selected_month" />
  <input type = "hidden" name = "person[birthdate][day]" id = "selected_day" />

  <input type = "hidden" name = "person[birthdate][age_estimate]" id = "age_estimate" />
<%end%>


<script>

function validateBirthdate() {
  year = document.getElementById('tbInputYear').value;
  month = document.getElementById('tbInputMonth').value;
  day = document.getElementById('tbInputDay').value;
  estimated_age = document.getElementById('tbInputAge').value;

  if (year.length == 0) {
      clearInputAge();
      input(btnUnknow);
      //year = 'Unknown';
      popUp();
      return;
  }
  else if (year != 'Unknown') {
      document.getElementById('selected_year').value = year;
      document.getElementById('selected_month').value = month;
      document.getElementById('selected_day').value = day;
  }
  else if (year == 'Unknown') {
      document.getElementById('selected_year').value = year;
      document.getElementById('age_estimate').value = estimated_age;
  }
  document.getElementById('new-person').submit();
}

</script>


