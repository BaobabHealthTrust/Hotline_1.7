<%= form_tag :controller => 'patient', :action => 'add_patient_attributes' do %>

    <%= hidden_field_tag "patient_id", params[:patient_id] %>


    <%= text_field_tag "person[cell_phone_number]",  params[:cell_phone_number],
                       {
                               :field_type => 'number',
                               :helpText => 'Cell Phone Number',
                               :validationRule => "^0\\d{7}$|Unknown|Not Available|N\/A|^0\\d{9}$",
                               :validationMessage => "Not a valid phone number",
                               :tt_pageStyleClass => "nota",
                               :id => 'cell_phone_number',
                               :tt_requireNextClick => true, :tt_onLoad => "$('nextButton').style.display = 'block';"
                       }
    %>

    <%= text_field "region" , 'region', {:helpText => 'Current Region',
                                         :tt_requireNextClick => false,
                                         :tt_onLoad => "$('nextButton').style.display = 'none';",
                                         :ajaxURL => '/people/region'} %>

    <%= select_tag "person[addresses][state_province]", options_for_select(@location_names.sort, []), {
                                                              :helpText => 'Current District',
                                                              :id => 'current_district',
                                                              :tt_requireNextClick => true} %>
    <%= text_field "person[addresses][county_district" ,
                   :condition => '$("address2").value != "Other"',
                   :helpText => 'Traditional Authority (T/A)',
                   :tt_requireNextClick => false, :ajaxURL => '',
                   :tt_pageStyleClass => "azButton",
                   :tt_onLoad => "$('nextButton').style.display = 'none';" %></p>


    <%= text_field_tag "person[addresses][city_village]", params[:city_village],
                       {
                        :field_type => 'alpha',
                        :helpText => 'Current Village',
                        :tt_requireNextClick => false,
                        :tt_pageStyleClass => "azButton",
                        :ajaxURL => "/people/village?search_string=",
                        :allowFreeText => false,
                        :tt_onLoad => '($nextButton).style.display = "none";'} %>



<% end %>
<script>
    tt_cancel_destination = '/';
    function set_ajaxURL_for_suggestions(url, filter_value) {
        $('touchscreenInput'+tstCurrentPage).setAttribute('ajaxURL', url + filter_value + "&search_string=");
        listSuggestions(tstCurrentPage);
    }
</script>