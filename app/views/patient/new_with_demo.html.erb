<script>
    tt_cancel_destination = '/';
    function set_ajaxURL_for_suggestions(url, filter_value) {
        $('touchscreenInput'+tstCurrentPage).setAttribute('ajaxURL', url + filter_value + "&search_string=");
        listSuggestions(tstCurrentPage);
    }
</script>

<style>
  .tt_controls_cell_phone_number #qwerty { display:none; }
  .tt_controls_cell_phone_number #num , #plus, #apostrophe, #star, #char, #abc, #date, #slash, #minus, #comma, #percent, #decimal { display:none; }

</style>


<%= form_tag '/patient/add_patient_attributes' do %>

    <%= hidden_field_tag "patient_id", params[:patient_id] %>


    <%= text_field_tag "person[cell_phone_number]",  params[:cell_phone_number],
                       {
                               :field_type => 'number',
                               :helpText => 'Cell Phone Number',
                               :validationRule => "^0\\d{7}$|Unknown|Not Available|N\/A|^0\\d{9}$",
                               :validationMessage => "Not a valid phone number",
                               :tt_pageStyleClass => "nota",
                               :id => 'cell_phone_number',
                               :tt_requireNextClick => true, 
                               :tt_onLoad => "showCategory('IVR#: #{@patient_obj.avr_access_number}');$('nextButton').style.display = 'block';"
                       }
    %>

  <%= select_tag "person[addresses][region_of_origin]", options_for_select([["", ""], ["Northern Region", "Northern"],
      ["Central Region", "Central"], ["Southern Region", "Southern"]]),
    {:id => "region_of_origin",
    :tt_requireNextClick => false,
    :tt_onLoad => "showCategory('IVR#: #{@patient_obj.avr_access_number}');$('nextButton').style.display = 'none';",
    :helptext => "Region of origin"}  %>

  <%= text_field_tag "person[addresses][home_district]", nil,
    {:id => "home_district",
    :tt_requireNextClick => false,
    :ajaxURL => "",
    :tt_onLoad => "showCategory('IVR#: #{@patient_obj.avr_access_number}');set_ajaxURL_for_suggestions('/patient/district?filter_value=', __$('region_of_origin').value); ",
    :helptext => "Home district"}  %>

  <%= text_field_tag "person[addresses][home_ta]", nil,
    {:id => "home_ta",
    :tt_requireNextClick => false,
    :ajaxURL => "",
    :tt_onLoad => "showCategory('IVR#: #{@patient_obj.avr_access_number}');$('nextButton').style.display = 'none'; set_ajaxURL_for_suggestions('/patient/ta?filter_value=', __$('home_district').value);",
    :helptext => "Traditional authority / TA"}  %>

  <%= text_field_tag "person[addresses][home_village]", nil,
    {:id => "home_village",
    :tt_requireNextClick => true,
    :ajaxURL => "",
    :tt_onLoad => "showCategory('IVR#: #{@patient_obj.avr_access_number}');$('nextButton').style.display = 'block'; set_ajaxURL_for_suggestions('/patient/village?district=' + __$('home_district').value + '&filter_value=' , __$('home_ta').value);",
    :helptext => "Home village"}  %>

<% end %>


