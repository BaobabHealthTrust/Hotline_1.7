<script>
    tt_cancel_destination = '/';
    function set_ajaxURL_for_suggestions(url, filter_value) {
        $('touchscreenInput'+tstCurrentPage).setAttribute('ajaxURL', url + filter_value + "&search_string=");
        listSuggestions(tstCurrentPage);
    }
</script>

<style>
  .tt_controls_cell_phone_number #qwerty { display:none; }
  .tt_controls_cell_phone_number #num , #plus, #apostrophe, #star, #char, #abc, #date, #slash, #minus, #comma, #percent, #decimal { display:none; }

</style>


<%= form_tag '/patient/add_patient_attributes' do %>

    <%= hidden_field_tag "patient_id", params[:patient_id] %>


    <%= text_field_tag "person[cell_phone_number]",  params[:cell_phone_number],
                       {
                               :field_type => 'number',
                               :helpText => 'Cell Phone Number',
                               :validationRule => "^0\\d{7}$|Unknown|Not Available|N\/A|^0\\d{9}$",
                               :validationMessage => "Not a valid phone number",
                               :tt_pageStyleClass => "nota",
                               :id => 'cell_phone_number',
                               :tt_requireNextClick => true, 
                               :tt_onLoad => "$('nextButton').style.display = 'block';"
                       }
    %>

  <%= select_tag "CURRENT REGION", options_for_select([["Northern Region", "Northern+Region"],
      ["Central Region", "Central+Region"], ["Southern Region", "Southern+Region"], ["", ""]]),
    {:id => "current_region",
    :tt_requireNextClick => false,
    :condition => "__$('country') == null || __$('country').value == 'Malawi'",
    :tt_onLoad => "$('nextButton').style.display = 'none';",
    :helptext => "Current region"}  %>

  <%= text_field_tag "person[addresses][state_province]", nil,
    {:id => "current_district",
    :tt_requireNextClick => false,
    :ajaxURL => "",
    :tt_onLoad => "set_ajaxURL_for_suggestions('/patient/district?filter_value=', __$('current_region').value); ",
    :helptext => "Current district"}  %>

  <%= text_field_tag "person[addresses][township_division]", nil,
    {:id => "current_area_of_residence",
    :tt_requireNextClick => false,
    :ajaxURL => "",
    :tt_onLoad => "$('nextButton').style.display = 'none'; set_ajaxURL_for_suggestions('/patient/ta?filter_value=', __$('current_district').value);",
    :helptext => "Current TA"}  %>

  <%= text_field_tag "person[addresses][city_village]", nil,
    {:id => "current_location_or_village",
    :tt_requireNextClick => true,
    :ajaxURL => "",
    :tt_onLoad => "$('nextButton').style.display = 'block'; set_ajaxURL_for_suggestions('/patient/village?district=' + __$('current_district').value + '&filter_value=' , __$('current_area_of_residence').value);",
    :helptext => "Current village"}  %>



<% end %>


